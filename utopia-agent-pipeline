node {
   stage("Code Check out"){
		git 'https://github.com/derekhcchou/UtopiaAirline_Agent.git'
   }
  
   stage("Compile-Package"){
       sh script: 'mvn clean install'
	   
	   
	   
	   
	   
	   sh script: 'sudo docker build -t travel-agent -f DockerfileAgent .'
   }
   
   stage ("SonarQube-Analysys"){
        withSonarQubeEnv("sonorQube"){
            
             sh script: 'mvn sonar:sonar'
        }
   }
   
 
}
sh script: 'docker tag travel-agent 443611426531.dkr.ecr.us-east-1.amazonaws.com/travel-agent'

 https://registry.hub.docker.io
 
 
 
 
 withAWS(region:'us-east-1',credentials:'aws-credentials') {

                 def identity=awsIdentity();//Log AWS credentials
				 
				 sh script: 'docker push 443611426531.dkr.ecr.us-east-1.amazonaws.com/travel-counter'

                
		}

